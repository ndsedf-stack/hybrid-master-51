<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test de Diagnostic - Hybrid Master 51</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 30px;
    }
    .section {
      margin-bottom: 25px;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #3498db;
    }
    .success {
      border-left-color: #2ecc71;
      background: #e8f8f5;
    }
    .error {
      border-left-color: #e74c3c;
      background: #fdeaea;
    }
    .warning {
      border-left-color: #f39c12;
      background: #fef9e7;
    }
    .status {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 10px;
    }
    .success .status {
      background: #2ecc71;
      color: white;
    }
    .error .status {
      background: #e74c3c;
      color: white;
    }
    .warning .status {
      background: #f39c12;
      color: white;
    }
    .resource {
      margin: 8px 0;
      padding: 8px;
      background: #f8f9fa;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
    }
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
    }
    button:hover {
      background: #2980b9;
    }
    #consoleOutput {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      height: 200px;
      overflow-y: auto;
      margin-top: 20px;
    }
    .button-test {
      background: #9b59b6;
    }
    .button-test:hover {
      background: #8e44ad;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîç Diagnostic Hybrid Master 51</h1>
    
    <div class="section">
      <h2>1. Test des Ressources CSS</h2>
      <div id="cssResults"></div>
    </div>
    
    <div class="section">
      <h2>2. Test des Ressources JavaScript</h2>
      <div id="jsResults"></div>
    </div>
    
    <div class="section">
      <h2>3. Test des √âl√©ments DOM</h2>
      <div id="domResults"></div>
      
      <div style="margin-top: 15px;">
        <h3>Test des Boutons :</h3>
        <button id="testPrevButton">Test Bouton ‚Üê Pr√©c√©dent</button>
        <button id="testNextButton">Test Bouton Suivant ‚Üí</button>
        <button id="testOtherElements" class="button-test">Test Autres √âl√©ments</button>
      </div>
    </div>
    
    <div class="section">
      <h2>4. Console de Diagnostic</h2>
      <div id="consoleOutput"></div>
    </div>
    
    <div class="section">
      <h2>5. Actions</h2>
      <button id="runAllTests">Lancer Tous les Tests</button>
      <button id="clearConsole">Effacer la Console</button>
    </div>
  </div>

  <script>
    // √âl√©ment pour afficher les r√©sultats
    const consoleOutput = document.getElementById('consoleOutput');
    
    // Fonction pour logger dans la console de diagnostic
    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString();
      const color = type === 'error' ? '#e74c3c' : 
                   type === 'success' ? '#2ecc71' : 
                   type === 'warning' ? '#f39c12' : '#3498db';
      
      const messageElement = document.createElement('div');
      messageElement.innerHTML = `<span style="color: ${color}">[${timestamp}]</span> ${message}`;
      consoleOutput.appendChild(messageElement);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      
      // Aussi logger dans la console du navigateur
      if (type === 'error') console.error(message);
      else if (type === 'warning') console.warn(message);
      else console.log(message);
    }
    
    // Test de chargement des ressources CSS
    function testCSSResources() {
      log('D√©but du test des ressources CSS...');
      const cssFiles = [
        './styles/01-reset.css',
        './styles/02-variables.css',
        './styles/03-base.css',
        './styles/04-layout.css',
        './styles/05-components.css',
        './styles/06-workout-mode.css',
        './styles/07-statistics.css',
        './styles/08-responsive.css'
      ];
      
      const resultsContainer = document.getElementById('cssResults');
      resultsContainer.innerHTML = '';
      
      cssFiles.forEach(file => {
        const resourceElement = document.createElement('div');
        resourceElement.className = 'resource';
        resourceElement.innerHTML = `
          <span>${file}</span>
          <span class="status">Test en cours...</span>
        `;
        resultsContainer.appendChild(resourceElement);
        
        // Test avec une requ√™te fetch
        fetch(file)
          .then(response => {
            if (response.ok) {
              resourceElement.querySelector('.status').textContent = 'CHARG√â';
              resourceElement.querySelector('.status').className = 'status';
              resourceElement.parentElement.classList.add('success');
              log(`‚úÖ ${file} - Charg√© avec succ√®s`, 'success');
            } else {
              resourceElement.querySelector('.status').textContent = 'ERREUR ' + response.status;
              resourceElement.querySelector('.status').className = 'status';
              resourceElement.parentElement.classList.add('error');
              log(`‚ùå ${file} - Erreur ${response.status}`, 'error');
            }
          })
          .catch(error => {
            resourceElement.querySelector('.status').textContent = 'ERREUR';
            resourceElement.querySelector('.status').className = 'status';
            resourceElement.parentElement.classList.add('error');
            log(`‚ùå ${file} - Impossible √† charger: ${error.message}`, 'error');
          });
      });
    }
    
    // Test de chargement des ressources JavaScript
    function testJSResources() {
      log('D√©but du test des ressources JavaScript...');
      const jsFiles = [
        {url: 'https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js', type: 'CDN'},
        {url: './scripts/app.js', type: 'Local'}
      ];
      
      const resultsContainer = document.getElementById('jsResults');
      resultsContainer.innerHTML = '';
      
      jsFiles.forEach(file => {
        const resourceElement = document.createElement('div');
        resourceElement.className = 'resource';
        resourceElement.innerHTML = `
          <span>${file.url} (${file.type})</span>
          <span class="status">Test en cours...</span>
        `;
        resultsContainer.appendChild(resourceElement);
        
        // Test avec une requ√™te fetch
        fetch(file.url)
          .then(response => {
            if (response.ok) {
              resourceElement.querySelector('.status').textContent = 'CHARG√â';
              resourceElement.querySelector('.status').className = 'status';
              resourceElement.parentElement.classList.add('success');
              log(`‚úÖ ${file.url} - Charg√© avec succ√®s`, 'success');
            } else {
              resourceElement.querySelector('.status').textContent = 'ERREUR ' + response.status;
              resourceElement.querySelector('.status').className = 'status';
              resourceElement.parentElement.classList.add('error');
              log(`‚ùå ${file.url} - Erreur ${response.status}`, 'error');
            }
          })
          .catch(error => {
            resourceElement.querySelector('.status').textContent = 'ERREUR';
            resourceElement.querySelector('.status').className = 'status';
            resourceElement.parentElement.classList.add('error');
            log(`‚ùå ${file.url} - Impossible √† charger: ${error.message}`, 'error');
          });
      });
    }
    
    // Test des √©l√©ments DOM
    function testDOMElements() {
      log('D√©but du test des √©l√©ments DOM...');
      const elements = [
        'prevWeek', 'nextWeek', 'weekDisplay', 'blockBadge', 'weekGrid',
        'totalVolume', 'totalExercises', 'estimatedTime', 'statsOverview',
        'workoutDays', 'workoutDetails'
      ];
      
      const resultsContainer = document.getElementById('domResults');
      resultsContainer.innerHTML = '';
      
      let foundCount = 0;
      
      elements.forEach(id => {
        const element = document.getElementById(id);
        const resourceElement = document.createElement('div');
        resourceElement.className = 'resource';
        
        if (element) {
          resourceElement.innerHTML = `
            <span>#${id}</span>
            <span class="status">TROUV√â</span>
          `;
          resourceElement.parentElement.classList.add('success');
          foundCount++;
          log(`‚úÖ √âl√©ment #${id} - Trouv√© dans le DOM`, 'success');
        } else {
          resourceElement.innerHTML = `
            <span>#${id}</span>
            <span class="status">NON TROUV√â</span>
          `;
          resourceElement.parentElement.classList.add('error');
          log(`‚ùå √âl√©ment #${id} - Non trouv√© dans le DOM`, 'error');
        }
        
        resultsContainer.appendChild(resourceElement);
      });
      
      // Mise √† jour du statut global
      const section = resultsContainer.parentElement;
      if (foundCount === elements.length) {
        section.classList.add('success');
        section.classList.remove('error', 'warning');
        log(`‚úÖ Tous les √©l√©ments DOM (${foundCount}/${elements.length}) sont pr√©sents`, 'success');
      } else if (foundCount > 0) {
        section.classList.add('warning');
        section.classList.remove('success', 'error');
        log(`‚ö†Ô∏è  Seulement ${foundCount}/${elements.length} √©l√©ments DOM trouv√©s`, 'warning');
      } else {
        section.classList.add('error');
        section.classList.remove('success', 'warning');
        log(`‚ùå Aucun √©l√©ment DOM trouv√©`, 'error');
      }
    }
    
    // Test des boutons
    function testButtons() {
      log('Test des fonctionnalit√©s des boutons...');
      
      const prevButton = document.getElementById('testPrevButton');
      const nextButton = document.getElementById('testNextButton');
      const otherButton = document.getElementById('testOtherElements');
      
      if (prevButton) {
        prevButton.addEventListener('click', function() {
          log('Bouton "Pr√©c√©dent" cliqu√© - Fonctionnel', 'success');
        });
      }
      
      if (nextButton) {
        nextButton.addEventListener('click', function() {
          log('Bouton "Suivant" cliqu√© - Fonctionnel', 'success');
        });
      }
      
      if (otherButton) {
        otherButton.addEventListener('click', function() {
          log('Test des autres √©l√©ments DOM...');
          testDOMElements();
        });
      }
      
      // Test des boutons r√©els de l'application
      const realPrevButton = document.getElementById('prevWeek');
      const realNextButton = document.getElementById('nextWeek');
      
      if (realPrevButton) {
        log('Bouton "Pr√©c√©dent" r√©el trouv√© dans le DOM', 'success');
        realPrevButton.addEventListener('click', function() {
          log('Bouton "Pr√©c√©dent" r√©el cliqu√©', 'success');
        });
      } else {
        log('Bouton "Pr√©c√©dent" r√©el NON trouv√©', 'error');
      }
      
      if (realNextButton) {
        log('Bouton "Suivant" r√©el trouv√© dans le DOM', 'success');
        realNextButton.addEventListener('click', function() {
          log('Bouton "Suivant" r√©el cliqu√©', 'success');
        });
      } else {
        log('Bouton "Suivant" r√©el NON trouv√©', 'error');
      }
    }
    
    // Lancer tous les tests
    function runAllTests() {
      log('=== LANCEMENT DE TOUS LES TESTS ===', 'info');
      testCSSResources();
      setTimeout(testJSResources, 500);
      setTimeout(testDOMElements, 1000);
      setTimeout(testButtons, 1500);
    }
    
    // Initialisation
    document.addEventListener('DOMContentLoaded', function() {
      log('Page de diagnostic charg√©e', 'success');
      
      // Configurer les boutons
      document.getElementById('runAllTests').addEventListener('click', runAllTests);
      document.getElementById('clearConsole').addEventListener('click', function() {
        consoleOutput.innerHTML = '';
        log('Console effac√©e', 'info');
      });
      
      // Lancer automatiquement quelques tests de base
      setTimeout(testDOMElements, 500);
      setTimeout(testButtons, 1000);
    });
  </script>
</body>
</html>
